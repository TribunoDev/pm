
function LlenarCatalogo(){$.get("/catalogo-productos/",function(data){$('#categorias-productos').html(data);},"html");}LlenarCatalogo();if(screen.width<641){$("#etiquetas ul").removeClass("nav-tabs");$("#etiquetas ul").addClass("nav-pills");$("#etiquetas").css("border-top","1px solid #bdc3c7");$("#etiquetas").css("border-bottom","1px solid #bdc3c7");$("#contenido-producto li").css("margin-left","120px");}$("#menu a").on("click",function(){$("#menu li").each(function(){$("#menu li").removeClass("active");});$(this).closest("li").addClass("active");});$("#myTab a").on("click",function(e){e.preventDefault();$("#myTab li").each(function(){$("#myTab li").removeClass("active");});$(this).closest("li").addClass("active");});$("#destacados").on("click",function(){Destacados();});$("#ofertas").on("click",function(){Ofertas();});function Destacados(){$.get("/productos-destacados/",function(data){$("#resultado-productos").html(data);},"html");}function Ofertas(){$.get("/productos-en-oferta/",function(data){$("#resultado-productos").html(data);},"html");}$('#resultado-productos, #todas-marcas').on('click','.btn-detalle',function(){$.ajax({type:'POST',url:'/detalle-producto/',data:{'parametro':$(this).attr('data'),'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val()},success:function(data){$('#modal-ventana').html(data);},dataType:'html',});});$('#btnRegistrar').on('click',function(e){password1=$('#id_password').val();password2=$('#repetir_password').val();if(password1!=password2){e.preventDefault();$('#repetir_password').addClass('alert-danger');}});$('#repetir_password').on('focus',function(){$('#repetir_password').removeClass('alert-danger');});$.ajax({type:'GET',url:'/obtener-datos-carrito/',data:{},success:function(data){$('.items-en-carrito').html(data);},dataType:'html'});function datos_carrito(){$.ajax({type:'GET',url:'/datos-carrito/',data:{},success:function(data){$('.total-item-carrito').html(data);},dataType:'html'});}datos_carrito();function item_carrito(){$.ajax({type:'GET',url:'/item-carrito/',data:{},success:function(data){$('.nav #total-item').html(data.cantidad);},dataType:'JsON'});}item_carrito();$('.items-carrito').on('click','.btnItem-Editar',function(e){var idDetalle=$(this).attr('data-id');var frmCantidad=$(this).closest('.item-cantidad').attr('data-id');e.preventDefault();$.ajax({type:'POST',url:'/form-editar-cantidad/',data:{'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val(),'idDetalle':idDetalle},success:function(data){$('div[data-id='+frmCantidad+'] div').html(data);},dataType:'html'});});$('.cuerpo-contenido').on('keypress','input[name="Cantidad"]',function(e){var cantida=$(this).val();var idDetalle=$(this).attr('data-id');if(e.which==13){e.preventDefault();if(cantida>=1){var form=$(this).closest('form').attr('id');var frmCantidad=$(this).closest('.item-cantidad').attr('data-id');actualizarCantidadCarrito(form,frmCantidad);}else{var resp=confirm("¿Está seguro de eliminar el producto de su carrito?");if(resp){$(this).closest('.item-carrito').slideUp('slow');eliminarItemCarrito(idDetalle);}}}});function actualizarCantidadCarrito(formulario,formularioCantidad){var form=formulario;var frmCantidad=formularioCantidad;$.ajax({type:'POST',url:'/actualizar-cantidad/',data:{'Cantidad':$('form[id='+form+'] input[name=Cantidad]').val(),'Producto':$('form[id='+form+'] input[name=Producto]').val(),'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val(),},success:function(data){$('div[data-id='+frmCantidad+'] div').html(data);datos_carrito();item_carrito();},dataType:'html'});}$('.items-carrito, #item-carrito').on('click','.btnItem-Actualizar',function(e){e.preventDefault();var form=$(this).closest('form').attr('id');var frmCantidad=$(this).closest('.item-cantidad').attr('data-id');actualizarCantidadCarrito(form,frmCantidad);});function eliminarItemCarrito(idDetalle){var codDetalle=idDetalle;$.ajax({type:'POST',url:'/eliminar-item/',data:{'idDetalle':codDetalle,'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val(),},success:function(data){datos_carrito();item_carrito();},dataType:'json'});}$('.items-carrito').on('click','.btnItem-Eliminar',function(e){e.preventDefault();var idDetalle=$(this).attr('data-id');$(this).closest('.item-carrito').slideUp('slow');eliminarItemCarrito(idDetalle);});$('.items-carrito').on('keyup','input[name=Cantidad]',function(){input_val=$(this).val();form=$(this).closest('form').attr('id');if(input_val===0){$('.item-carrito form[id='+form+'] a').text('Eliminar');$('.item-carrito form[id='+form+'] a').removeClass('btnItem-Actualizar');$('.item-carrito form[id='+form+'] a').addClass('btnItem-Eliminar');}else{$('.item-carrito form[id='+form+'] a').text('Actualizar');$('.item-carrito form[id='+form+'] a').addClass('btnItem-Actualizar');$('.item-carrito form[id='+form+'] a').removeClass('btnItem-Eliminar');}});$('#frmRegUsuario label, #formularioEmail label').addClass('control-label');$('#id_username').addClass('form-control input-lg');$('#id_password').addClass('form-control input-lg');$('#id_amigo, #id_correo, #id_mensaje, #id_email').addClass('form-control');$('#panel-direccion input, #panel-direccion select, #panel-direccion textarea').addClass('form-control');$('#no-template-pager img').on('click',function(){$('#no-template-pager img').removeClass('active_img');$(this).addClass('active_img');});$('.s2').cycle({fx:'fade'});var home='http://django.pm.hn/';var href=$(location).attr('href');if(home==href){$('#myCarousel').css('display','block');}var centinela_marca=$('#centinela_marca').val();if(centinela_marca===0){$('#list_carousel').css('display','none');}$('#carouMarcas').carouFredSel({items:{width:200,height:165,visible:{min:1,max:8}},prev:'#prev2',next:'#next2',mousewheel:true,responsive:true,scroll:2,swipe:{onMouse:true,onTouch:true},width:'100%',});$('#frmDireccion input, #frmDireccion select, #frmDireccion textarea').attr('required','True');$('#username').on('blur',function(){username=$('#username').val();$.ajax({type:'POST',url:'/verificar-usuario/',data:{'usuario':username,'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val(),},success:function(data){if(data.tUser===1){$('#verificaUser').text("El nombre de usuario '"+username+"' ya existe");$('#username').val("");}else{$('#verificaUser').text("");}},dataType:'json'});});$('#email').on('blur',function(){email=$('#email').val();$.ajax({type:'POST',url:'/verificar-email/',data:{'email':email,'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val(),},success:function(data){if(data.tUser===1){$('#verificarEmail').text("El e-mail '"+email+"' ya está registrado");$('#email').val("");}else{$('#verificarEmail').text("");}},dataType:'json'});});$('#recEmail').on('blur',function(){email=$('#recEmail').val();$.ajax({type:'POST',url:'/verificar-email/',data:{'email':email,'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val(),},success:function(data){if(data.tUser===0){$('#verificarEmail').text("El e-mail '"+email+"' ya está registrado");$('#email').val("");}else{$('#verificarEmail').text("");}},dataType:'json'});});$('#RNP').on('blur',function(){RNP=$('#RNP').val();$.ajax({type:'POST',url:'/verificar-rnp/',data:{'rnp':RNP,'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val(),},success:function(data){if(data.tUser===1){$('#verificaRNP').text("El RNP '"+RNP+"' ya está registrado");$('#RNP').val("");}else{$('#verificaRNP').text("");}},dataType:'json'});});$('#id_url').val(href);$('#id_amigo').attr('required','required');$('#id_correo').attr('required','required');$('#id_mensaje').attr('required','required');$('#myModalRecomendacion #id_url').val("www.django.pm.hn");$('#id_Region').attr('disabled','disabled');$('#id_Ciudad').attr('disabled','disabled');$('#id_Pais').on('click',function(){if($(this).val()===""){$('#id_Region, #id_Ciudad').val("");$('#id_Region').attr('disabled','disabled');$('#id_Ciudad').attr('disabled','disabled');}else{$('#id_Region').removeAttr('disabled');}});$('#id_Pais').change(function(){$.ajax({type:'POST',url:'/cargar-region/',data:{'pais':$(this).val(),'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val(),},success:function(data){$('#id_Region').html(data);},dataType:'html'});});$('#id_Region').on('click',function(){if($(this).val()===""){$('#id_Ciudad').val("");$('#id_Ciudad').attr('disabled','disabled');}else{$('#id_Ciudad').removeAttr('disabled');}});$('#id_Region').change(function(){$.ajax({type:'POST',url:'/cargar-ciudad/',data:{'region':$(this).val(),'csrfmiddlewaretoken':$('input[name="csrfmiddlewaretoken"]').val(),},success:function(data){$('#id_Ciudad').html(data);},dataType:'html'});});